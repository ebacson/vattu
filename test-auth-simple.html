<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Auth Simple</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        .auth-tabs { display: flex; margin-bottom: 20px; }
        .auth-tab { flex: 1; padding: 10px; text-align: center; cursor: pointer; border: 1px solid #ddd; }
        .auth-tab.active { background: #007bff; color: white; }
        .auth-form { display: none; }
        .auth-form.active { display: block; }
    </style>
</head>
<body>
    <h1>🔧 Test Auth Simple</h1>
    
    <div id="status" class="status warning">
        ⏳ Testing auth tabs...
    </div>
    
    <div class="auth-tabs">
        <button class="auth-tab active" onclick="showTab('login')">Đăng nhập</button>
        <button class="auth-tab" onclick="showTab('register')">Đăng ký</button>
        <button class="auth-tab" onclick="showTab('forgot')">Quên mật khẩu</button>
    </div>
    
    <form id="loginForm" class="auth-form active">
        <h3>Đăng nhập</h3>
        <p>Form đăng nhập</p>
    </form>
    
    <form id="registerForm" class="auth-form">
        <h3>Đăng ký</h3>
        <p>Form đăng ký</p>
    </form>
    
    <form id="forgotForm" class="auth-form">
        <h3>Quên mật khẩu</h3>
        <p>Form quên mật khẩu</p>
    </form>
    
    <div id="results"></div>
    
    <h3>Debug Info:</h3>
    <div id="debug"></div>

    <script>
        let debugInfo = [];
        
        function addDebug(message) {
            const timestamp = new Date().toLocaleTimeString();
            debugInfo.push(`${timestamp}: ${message}`);
            updateDebugDisplay();
            console.log(`[Auth Test] ${message}`);
        }
        
        function updateDebugDisplay() {
            document.getElementById('debug').innerHTML = '<pre>' + debugInfo.join('\n') + '</pre>';
        }
        
        function showResult(message, type) {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = 'status ' + type;
            div.innerHTML = message;
            results.appendChild(div);
        }
        
        // Show specific tab
        function showTab(tabName) {
            addDebug('showTab called with: ' + tabName);
            
            // Hide all forms
            const forms = document.querySelectorAll('.auth-form');
            forms.forEach(form => form.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.auth-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected form
            const selectedForm = document.getElementById(tabName + 'Form');
            if (selectedForm) {
                selectedForm.classList.add('active');
                addDebug('Form ' + tabName + 'Form shown');
            } else {
                addDebug('Form ' + tabName + 'Form not found');
            }
            
            // Add active class to selected tab
            const selectedTab = document.querySelector(`[onclick="showTab('${tabName}')"]`);
            if (selectedTab) {
                selectedTab.classList.add('active');
                addDebug('Tab ' + tabName + ' activated');
            } else {
                addDebug('Tab ' + tabName + ' not found');
            }
            
            showResult('✅ Tab switched to: ' + tabName, 'success');
        }
        
        // Test functions
        function testShowTab() {
            addDebug('Testing showTab function...');
            showTab('register');
        }
        
        function testAllTabs() {
            addDebug('Testing all tabs...');
            showTab('login');
            setTimeout(() => showTab('register'), 1000);
            setTimeout(() => showTab('forgot'), 2000);
            setTimeout(() => showTab('login'), 3000);
        }
        
        // Make functions global
        window.showTab = showTab;
        window.testShowTab = testShowTab;
        window.testAllTabs = testAllTabs;
        
        // Start
        addDebug('Auth Test page loaded');
        document.getElementById('status').innerHTML = '✅ Auth Test ready! Click tabs to test.';
        document.getElementById('status').className = 'status success';
        
        // Test after 1 second
        setTimeout(() => {
            addDebug('Auto-testing showTab function...');
            testShowTab();
        }, 1000);
    </script>
</body>
</html>
